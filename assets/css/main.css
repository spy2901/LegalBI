.metismenu > li:first-child .ai-icon i,
.metismenu > li.active .ai-icon i,
.metismenu > li.mm-active .ai-icon i {
  display: inline-block !important;
  visibility: visible !important;
  min-width: 24px;
  text-align: center;
  margin-right: 10px;
}

/* ako koristiš SVG umesto FA na prvoj stavci */
.metismenu > li:first-child .ai-icon::before,
.metismenu > li.active .ai-icon::before {
  display: none !important;
}

/* ======================================================
            SUBMENU – OSNOVNO STANJE
        ====================================================== */
.deznav .metismenu ul {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition:
    max-height 1s ease,
    opacity 1s ease,
    transform 1s ease;
}

/* ======================================================
        OTVORENO
        ====================================================== */
.deznav .metismenu li.mm-active > ul {
  max-height: 500px;
  opacity: 1;
  transform: translateY(0);
}

/* ======================================================
        KLJUČNO: TOKOM ZATVARANJA (MetisMenu state)
        ====================================================== */
.deznav .metismenu ul.mm-collapsing {
  max-height: 500px;
  /* polazna tačka za animaciju */
  opacity: 1;
  transform: translateY(0);
}

/* ======================================================
            METISMENU FIX
        ====================================================== */
.deznav .metismenu ul.collapse {
  display: block !important;
}

/* ======================================================
        STRELICA
        ====================================================== */
.deznav .metismenu .has-arrow {
  position: relative;
}

.deznav .metismenu .has-arrow::after {
  content: "";
  position: absolute;
  right: 1.5rem;
  top: 50%;
  width: 8px;
  height: 8px;
  border-right: 2px solid #7a86b8;
  border-bottom: 2px solid #7a86b8;
  transform: translateY(-50%) rotate(45deg);
  transition:
    transform 0.6s ease,
    border-color 0.4s ease;
}

.deznav .metismenu > li:hover > a.has-arrow::after {
  border-color: #2f7be5;
}

.deznav .metismenu li.mm-active > a.has-arrow::after {
  transform: translateY(-50%) rotate(-135deg);
  border-color: #2f7be5;
}
/* Inline SVG should match Font Awesome sizing, spacing and color */
.ai-icon .inline-icon {
  display: inline-block;
  vertical-align: middle;
  min-width: 24px;
  width: 24px;
  height: 24px;
  text-align: center;
  margin-right: 10px;
  fill: currentColor;
  color: inherit;
}

/* Dark mode styles --- keep them minimal and scoped to the main layout */
.dark-mode {
  background: #071021;
  color: #d1d5db;
}

.dark-mode a {
  color: #cbd5e1;
}

.dark-mode .nav-header,
.dark-mode .header,
.dashboard_bar,
.header-info span,
.dark-mode .footer {
  background: #0b1220;
  color: #cbd5e1;
}

.dark-mode .brand-title {
  color: #93c5fd !important;
}

.dark-mode .brand-title span {
  color: #e6eefc !important;
}

.dark-mode .deznav {
  background: #071126;
}

.dark-mode .deznav .metismenu li a {
  color: #cbd5e1;
}

.dark-mode .deznav .metismenu .has-arrow::after {
  border-color: #94a3b8;
}

.dark-mode .dropdown-menu {
  background: #0b1220;
  color: #e6eefc;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.dark-mode .dropdown-item.ai-icon svg,
.dark-mode .dropdown-item.ai-icon i {
  color: #e6eefc !important;
}

/* small cards / panels fall back to inherit colors */
.dark-mode .card,
.dark-mode .card-body {
  background: #071227;
  color: #d1d5db;
}

/* Ensure inline SVGs inherit color and dark-mode forces white text */
.ai-icon svg.inline-icon {
  width: 20px;
  height: 20px;
  vertical-align: middle;
  margin-right: 10px;
  stroke: currentColor;
  fill: currentColor;
  color: inherit;
}

/* Dark-mode overrides */
body.dark-mode {
  background: #071021 !important;
  color: #ffffff !important;
}

body.dark-mode a {
  color: #ffffff !important;
}

body.dark-mode svg,
body.dark-mode svg * {
  stroke: currentColor !important;
  fill: currentColor !important;
  color: inherit !important;
}
